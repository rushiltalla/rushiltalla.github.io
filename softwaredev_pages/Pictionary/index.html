<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pictionary Categories</title>
  <style>
    :root {
      --orange: #ff8a00;
      --green: #1fa66a;
      --pink: #ff6fb0;
      --yellow: #ffd447;
      --blue: #6ad0ff;
      --ink: #111418;
      --muted: #4a5568;
      --bg: #f5f7fb;
      --panel: #ffffff;
      --shadow: 0 10px 35px rgba(0, 0, 0, 0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", "Inter", -apple-system, system-ui, sans-serif;
      background: var(--bg);
      color: var(--ink);
      min-height: 100vh;
      overflow: hidden;
    }
    header {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 10;
    }
    .control-wrap {
      position: relative;
      display: inline-block;
    }
    .twox-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      border: 2px solid rgba(0,0,0,0.08);
      background: #fff;
      color: var(--ink);
      padding: 0.5rem 0.9rem;
      border-radius: 12px;
      font-weight: 800;
      letter-spacing: 0.05em;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
    }
    .twox-toggle.active {
      background: #0f172a;
      color: #fff;
      box-shadow: 0 14px 36px rgba(0,0,0,0.2);
      transform: translateY(-1px);
    }
    .control-toggle {
      border: none;
      background: rgba(255, 255, 255, 0.9);
      color: var(--ink);
      width: 44px;
      height: 44px;
      border-radius: 50%;
      font-weight: 800;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform 150ms ease, box-shadow 150ms ease;
    }
    .control-toggle:hover { transform: translateY(-1px); }
    .control-toggle:active { transform: translateY(0); box-shadow: none; }
    .control-menu {
      position: absolute;
      top: 52px;
      left: 0;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 0.5rem;
      display: none;
      gap: 0.4rem;
      min-width: 160px;
    }
    .control-menu.active { display: flex; flex-direction: column; }
    .control-btn {
      border: none;
      background: var(--panel);
      color: var(--ink);
      padding: 0.55rem 0.9rem;
      border-radius: 10px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 150ms ease, box-shadow 150ms ease;
      box-shadow: var(--shadow);
    }
    .control-btn:active { transform: translateY(0); box-shadow: none; }
    main {
      display: flex;
      flex-direction: column;
      height: 100vh;
      padding: 4rem 1.3rem 1.5rem;
      gap: 1rem;
      justify-content: space-between;
    }
    .title {
      text-align: center;
      font-size: 1.4rem;
      letter-spacing: 0.02em;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      text-align: center;
      color: var(--muted);
      margin: -0.4rem 0 0.6rem;
      font-size: 0.95rem;
    }
    .categories {
      display: grid;
      grid-template-rows: repeat(5, 1fr);
      gap: 0.7rem;
      height: 100%;
    }
    .cat-card {
      display: grid;
      grid-template-columns: 1fr;
      align-content: center;
      justify-items: center;
      background: var(--panel);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 0.6rem;
      cursor: pointer;
      transition: transform 150ms ease, box-shadow 150ms ease;
    }
    .cat-card:active { transform: scale(0.99); box-shadow: none; }
    .badge {
      width: 70px;
      height: 70px;
      border-radius: 18px;
      display: grid;
      place-items: center;
      color: #0e1116;
      font-size: 1.2rem;
      font-weight: 800;
      letter-spacing: 0.02em;
      border: 2px solid rgba(0, 0, 0, 0.08);
      padding: 8px;
    }
    .badge svg { width: 46px; height: 46px; }
    .label {
      margin-top: 0.35rem;
      font-weight: 700;
      font-size: 1rem;
      color: var(--ink);
      text-align: center;
    }
    .editor {
      position: fixed;
      inset: auto 0 0 0;
      background: rgba(255, 255, 255, 0.97);
      box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.08);
      border-radius: 16px 16px 0 0;
      padding: 1rem 1rem 1.2rem;
      transform: translateY(100%);
      transition: transform 180ms ease;
      max-height: 70vh;
      overflow-y: auto;
    }
    .editor.active { transform: translateY(0); }
    .edit-title {
      font-weight: 700;
      margin: 0 0 0.25rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chip-row { display: flex; flex-wrap: wrap; gap: 0.4rem; margin: 0.35rem 0 0.6rem; }
    .chip {
      background: #eef2f7;
      border-radius: 12px;
      padding: 0.35rem 0.65rem;
      font-size: 0.9rem;
      border: 1px solid rgba(0, 0, 0, 0.05);
      cursor: pointer;
      transition: transform 120ms ease;
    }
    .chip:hover { transform: translateY(-1px); }
    .add-row { display: flex; gap: 0.4rem; margin-bottom: 0.8rem; }
    .add-row input {
      flex: 1;
      border: 1px solid #cdd4e0;
      border-radius: 10px;
      padding: 0.5rem 0.75rem;
      font-size: 0.95rem;
      background: #f8fafc;
    }
    .add-row button {
      border: none;
      background: var(--ink);
      color: #fff;
      padding: 0.5rem 0.8rem;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
    }
    .info {
      font-size: 0.9rem;
      color: var(--muted);
      margin: 0.3rem 0 0.8rem;
    }
    @media (min-width: 700px) {
      main { max-width: 500px; margin: 0 auto; }
    }
  </style>
</head>
<body>
  <header>
    <div class="control-wrap">
      <button class="control-toggle" id="control-toggle">...</button>
      <div class="control-menu" id="control-menu">
        <button class="control-btn" id="reset-btn">Reset</button>
        <button class="control-btn" id="modify-btn">Modify</button>
      </div>
    </div>
  </header>
  <button class="twox-toggle" id="twox-toggle">2x</button>
  <main>
    <div>
      <div class="title">Pictionary Draw Deck</div>
    </div>
    <section class="categories" id="category-list"></section>
  </main>

  <section class="editor" id="editor-panel" aria-label="Edit word lists">
    <div class="info">Tap a word to remove it. Add new ones below each category.</div>
    <div id="editor-content"></div>
  </section>

  <script>
    const COLORS = {
      allPlay: 'var(--orange)',
      difficult: 'var(--green)',
      action: 'var(--pink)',
      personPlace: 'var(--yellow)',
      object: 'var(--blue)'
    };
    const INITIALS = {
      allPlay: 'AP',
      difficult: 'D',
      action: 'A',
      personPlace: 'PPA',
      object: 'OBJ'
    };
    const LABELS = {
      allPlay: 'All Play',
      difficult: 'Difficult',
      action: 'Action',
      personPlace: 'Person, Place, etc.',
      object: 'Object'
    };
    const STORAGE_KEY = 'pictionaryWords';
    const TWOX_ACTIVE_KEY = 'twoxActive';
    const TWOX_PAYLOAD_PREFIX = 'twox:';
    const initialWords = {
  allPlay: [
    "WiFi Outage",
    "Midnight Taco Bell Run",
    "Lost AirPod",
    "Overpacked Suitcase",
    "Coffee Addiction",
    "Broken Elevator",
    "Golf Cart Crash",
    "Key Lost in Couch", 
    "Netflix Are You Still Watching",
    "Spill on Shirt",
    "Airport Security Line",
    "Crying Baby on Plane",
    "The Floor Is Lava",
    "Group Chat",
    "Charging Cord",
    "Alarm Clock",
    "Online Dating",
    "Traffic Jam",
    "Spilled Coffee",
    "Midnight Snack",
    "Broken Controller",
    "Procrastination",
    "Overflowing Laundry Basket",
    "Carpool Karaoke",
    "Pumpkin Spice Latte",
    "Fortnite",
    "Driving Test",
    "Movie Marathon",
    "Dorm Fire Alarm",
    "Parking Ticket",
    "Campus Police",
    "Frat House",
    "Bike Crash",
    "Elevator Full of People",
    "Low Battery",
  ],

  difficult: [
    "Peer Pressure",
    "Quantum Physics",
    "Inflation",
    "Circuit",
    "Multiverse",
    "Perfectionism",
    "Echolocation",
    "Social Anxiety",
    "Overthinking",
    "Identity Theft",
    "Photosynthesis",
    "Mitochondria",
    "DNA Replication",
    "Reaction",
    "Mutation",
    "Plate Tectonics",
    "Greenhouse Effect",
    "Hoover Dam",
    "Panama Canal",
    "The Constitution",
    "Grand Canyon",
    "Space Station",
    "Observatory",
    "Topspin",
    "Paneer Tikka Masala",
    "Stock Market",
  ],

  action: [
    "Mining",
    "Rage-Quitting",
    "Camping",
    "Quick Scoping",
    "Dodging",
    "Reloading",
    "Ghosting Someone",
    "Doomscrolling",
    "Drunk Texting",
    "Third-Wheeling",
    "Thirst Trap",
    "Gaslighting",
    "Catfishing",
    "Stepping on a Lego",
    "Falling Asleep in Class",
    "Blacking Out",
    "Cliff Diving",
    "Stargazing",
    "Foraging",
    "Birdwatching",
    "Surfing",
    "Slam Dunk",
    "Hole-in-One",
    "Serving a Tennis Ball",
    "Dribbling",
    "Sprinting",
    "Stretching",
    "Warming Up",
    "High-Fiving",
    "Rolling Dough",
    "Tossing Pizza Dough",
    "Chopping Vegetables",
    "Pouring Sauce",
    "Taking a Selfie",
    "Lip-Syncing",
    "Viral Dance",
    "Pranking Someone",
    "Online Shopping",
    "Oversleeping",
    "Speed-Eating",
    "Sneaking Out",
    "Dropping a Plate",
    "Microwaving Food",
    "Running on Treadmill",
    "Playing Fetch",
    "Making a Toast",
    "Running to the Bus",
  ],

  personPlace: [
    "Skeleton",
    "Mario",
    "Bowser",
    "Pac-Man",
    "Angry Bird",
    "Conspiracy Theorist",
    "Gym Influencer",
    "Florida Man", 
    "Sleep-Deprived Student",
    "DJ",
    "Frat Boy",
    "Designated Driver", 
    "Alcoholic",
    "Influencer",
    "Twitch Streamer",
    "TikTok Dancer", 
    "Ostrich",
    "Walrus",
    "Bear",
    "Giant Squid",
    "Mountain Goat",
    "Canyon",
    "Rainforest",
    "Active Volcano",
    "Glacier",
    "Swamp",
    "Bamboo Forest",
    "Sand Dunes",
    "Stormy Ocean",
    "Bartender",
    "Office Manager",
    "Politician",
    "Lawyer",
    "Banker",
    "Bouncer",
    "Mayor",
    "Donald Trump",
    "George Washington",
    "Abraham Lincoln",
    "Panda",
    "Dolphin",
    "Flamingo",
    "Kangaroo",
    "Parrot",
    "Penguin",
    "Elephant",
    "Gaming Room",
    "Snack Bar",
    "Basketball Court",
    "Golf Course",
    "Subway Station",
    "Taco Truck",
    "Pizza Shop",
    "Great Wall of China",
    "Taj Mahal",
    "Stonehenge",
    "Colosseum",
    "Eiffel Tower",
    "Burj Khalifa",
    "Leaning Tower of Pisa",
    "Golden Gate Bridge",
    "Pyramids of Giza",
    "Mount Rushmore",
    "Escape Room",
    "Haunted House",
    "Amusement Park",
    "Aquarium",
    "Zoo"
  ],

  object: [
    "Pickaxe",
    "Torch",
    "Dynamite", 
    "Chest",
    "Berry Bush",
    "Mirror",
    "Grappling Hook",
    "Medkit",
    "Frag Grenade",
    "Loot Crate",
    "Sniper Scope",
    "Potion", 
    "Game Controller",
    "VR Headset",
    "Headphones",
    "Tennis Racket",
    "Golf Club",
    "Golf Tee",
    "Basketball Hoop",
    "Scoreboard",
    "Water Bottle",
    "Sweatband",
    "Cleats",
    "Gym Bag",
    "Taco",
    "Burrito",
    "Quesadilla",
    "Nachos",
    "Guacamole",
    "Pizza Slice",
    "Spaghetti",
    "Ravioli",
    "Lasagna",
    "Naan",
    "Tandoori Oven",
    "Hamburger",
    "Hotdog",
    "Donut",
    "Cupcake",
    "Milkshake",
    "Burrito Bowl",
    "Tortilla Chips",
    "Chili Pepper",
    "Vape",
    "Broken iPhone Screen",
    "LED Strip Lights",
    "Bath Bomb",
    "Crocs",
    "Fake ID",
    "Mini Fridge",
    "Ring Light",
    "Blender",
    "Water Jug",
    "Stuffed Animal",
    "Scratch-Off Ticket",
    "Beer Pong",
    "Record Player",
    "Polaroid Camera",
    "Volcano Rock",
    "Iceberg Chunk",
    "Seashell",
    "Campfire",
    "Cactus",
    "Tree Stump",
    "AirPods",
    "Hydro Flask",
    "Backpack",
    "Skateboard",
    "Lava Lamp",
    "Beanbag Chair",
    "Water Gun",
    "Drone",
    "Flashlight",
    "USB Stick",
    "Charging Cable",
    "Hoodie",
    "Sunglasses",
    "Snow Globe",
    "Fireplace",
    "Chocolate Bar",
    "Smartwatch",
    "Croissant",
    "Ice Cream Sandwich",
    "Sticky Notes",
  ]
};

    function loadWords() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored) {
        try { return JSON.parse(stored); }
        catch { localStorage.removeItem(STORAGE_KEY); }
      }
      localStorage.setItem(STORAGE_KEY, JSON.stringify(initialWords));
      return JSON.parse(JSON.stringify(initialWords));
    }
    function saveWords(words) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(words));
    }
    function resetWords() {
      saveWords(initialWords);
      renderEditor();
      closeControls();
      alert('Word lists reset to defaults.');
    }

    function renderCategories() {
      const container = document.getElementById('category-list');
      container.innerHTML = '';
      Object.keys(LABELS).forEach(key => {
        const card = document.createElement('div');
        card.className = 'cat-card';
        card.onclick = () => {
          if (twoxActive) {
            startTwoXFlow(key);
          } else {
            openCategory(key);
          }
        };
        const badge = document.createElement('div');
        badge.className = 'badge';
        badge.style.background = COLORS[key];
        badge.textContent = INITIALS[key] || key.toUpperCase();
        const label = document.createElement('div');
        label.className = 'label';
        label.textContent = LABELS[key];
        card.appendChild(badge);
        card.appendChild(label);
        container.appendChild(card);
      });
    }

    function renderEditor() {
      const editorContent = document.getElementById('editor-content');
      const words = loadWords();
      editorContent.innerHTML = '';
      Object.keys(LABELS).forEach(key => {
        const wrapper = document.createElement('div');
        const title = document.createElement('div');
        title.className = 'edit-title';
        title.innerHTML = `<span>${LABELS[key]}</span><span style="color:${COLORS[key]}">‚óè</span>`;
        const chips = document.createElement('div');
        chips.className = 'chip-row';
        (words[key] || []).forEach(item => {
          const chip = document.createElement('div');
          chip.className = 'chip';
          chip.textContent = item;
          chip.onclick = () => {
            const updated = loadWords();
            updated[key] = updated[key].filter(w => w !== item);
            saveWords(updated);
            renderEditor();
          };
          chips.appendChild(chip);
        });
        const addRow = document.createElement('div');
        addRow.className = 'add-row';
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Add new word';
        const addBtn = document.createElement('button');
        addBtn.textContent = 'Add';
        addBtn.onclick = () => {
          const value = input.value.trim();
          if (!value) return;
          const updated = loadWords();
          updated[key] = [...(updated[key] || []), value];
          saveWords(updated);
          input.value = '';
          renderEditor();
        };
        addRow.appendChild(input);
        addRow.appendChild(addBtn);
        wrapper.appendChild(title);
        wrapper.appendChild(chips);
        wrapper.appendChild(addRow);
        editorContent.appendChild(wrapper);
      });
    }

    function updateTwoXToggle() {
      const btn = document.getElementById('twox-toggle');
      if (!btn) return;
      btn.classList.toggle('active', twoxActive);
    }

    function setTwoXActive(state) {
      twoxActive = state;
      sessionStorage.setItem(TWOX_ACTIVE_KEY, state ? '1' : '0');
      updateTwoXToggle();
    }

    function setupTwoXToggle() {
      const btn = document.getElementById('twox-toggle');
      if (!btn) return;
      twoxActive = sessionStorage.getItem(TWOX_ACTIVE_KEY) === '1';
      updateTwoXToggle();
      btn.onclick = () => setTwoXActive(!twoxActive);
    }

    function startTwoXFlow(primaryKey) {
      const words = loadWords();
      const payload = {};
      let primaryWord = null;

      Object.keys(LABELS).forEach(key => {
        const list = words[key] || [];
        if (list.length === 0) {
          payload[key] = null;
          return;
        }
        const idx = Math.floor(Math.random() * list.length);
        const [word] = list.splice(idx, 1);
        payload[key] = { word, remaining: list.length };
        if (key === primaryKey) {
          primaryWord = word;
        }
      });

      if (!primaryWord) {
        alert('No words left in this category for 2x mode.');
        return;
      }

      saveWords(words);
      const id = `twox-${Date.now()}-${Math.random().toString(16).slice(2)}`;
      sessionStorage.setItem(
        `${TWOX_PAYLOAD_PREFIX}${id}`,
        JSON.stringify({
          primary: primaryKey,
          words: payload
        })
      );
      window.open(`twox.html?id=${encodeURIComponent(id)}`, '_blank');
      setTwoXActive(false);
    }

    function openCategory(key) {
      const words = loadWords();
      if (!words[key] || words[key].length === 0) {
        alert('No words left in this category. Reset or add more.');
        return;
      }
      window.open(`category.html?category=${encodeURIComponent(key)}`, '_blank');
    }

    function closeControls() {
      const menu = document.getElementById('control-menu');
      if (menu) menu.classList.remove('active');
    }

    function setupControls() {
      document.getElementById('reset-btn').onclick = resetWords;
      const modifyBtn = document.getElementById('modify-btn');
      const panel = document.getElementById('editor-panel');
      modifyBtn.onclick = () => {
        const active = panel.classList.toggle('active');
        modifyBtn.textContent = active ? 'Done' : 'Modify';
        if (active) renderEditor();
      };

      const toggle = document.getElementById('control-toggle');
      const menu = document.getElementById('control-menu');
      toggle.onclick = (e) => {
        e.stopPropagation();
        menu.classList.toggle('active');
      };
      document.addEventListener('click', (e) => {
        const wrap = document.querySelector('.control-wrap');
        if (!wrap.contains(e.target)) closeControls();
      });
    }

    renderCategories();
    renderEditor();
    setupControls();
    setupTwoXToggle();
  </script>
</body>
</html>
